class t{static ctx;constructor(e,r={},n=!1){t.ctx=this,this.$root=t.make(e,r,n)}static make(e,r={},n=!1){return e&&"object"==typeof r?r instanceof Node?r:("svg"==e&&(n=!0),t.config(n?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e),r,n)):null}static config(e,r,n=!1){if(Array.isArray(e))return e.forEach(e=>t.config(e,r,n)),null;if(!(e instanceof Node)||"object"!=typeof r)return e;let a=r.context;t.ctx=null===a?null:a||t.ctx,a=t.ctx;let o=r=>{if(r)if(r instanceof Node)e.appendChild(r);else if(r instanceof t)e.appendChild(r.$root);else if("string"==typeof r)e.innerHTML+=r;else if("object"==typeof r){let a=t.make(r.tag??"div",r,n||"svg"==r.tag);a&&e.appendChild(a)}};for(const[n,i]of Object.entries(r)){switch(n){case"text":e.textContent=null==i?"":i+"";continue;case"html":e.innerHTML=null==i?"":i+"";continue;case"tag":case"context":case"get":case"also":continue}if(i)switch(n){case"class":(Array.isArray(i)?i:i.split(" ")).map(t=>t&&e.classList.add(t));break;case"push":i.push(e);break;case"var":a&&(a["$"+i]=e);break;case"events":for(let t in i)e.addEventListener(t,i[t].bind(a));break;case"parent":i.appendChild(e);break;case"attrs":for(let t in i)e.setAttribute(t,i[t]);break;case"props":for(let t in i)e[t]=i[t];break;case"child_r":t.clear(e);case"child":o(i);break;case"children_r":t.clear(e);case"children":for(let t of i)o(t);break;case"style":if("string"==typeof i)e.style.cssText+=i+";";else for(let t in i)i[t]&&(e.style[t]=i[t]);break;default:e[n]=i}}return r.also&&a&&r.also.call(a,e),e}static clear(t){for(;t.firstChild;)t.removeChild(t.lastChild)}static makeArray(e,r=!1){return e&&Array.isArray(e)?e.map(e=>t.make(e.tag,e,r)):[]}static makeShadow(e,r={},n=null){if(!e||"object"!=typeof r)return null;let a=e instanceof Node?e:document.createElement(e);return a.attachShadow({mode:"open"}),t.config(a.shadowRoot,{context:r.context,children:[{tag:"style",textContent:n??""},r.child??{},...r.children??[]]}),delete r.children,delete r.child,t.config(a,r),a}}new Set,new Map;class e{_data;constructor(t){this._data=t}get label(){return this._data.$label.innerText}set label(t){return this._data.$label.innerText=t+""}get value(){return this._data.$control.value}set value(t){return this._data.$control.value=t+""}get input(){return this._data.$control}display(t){this._data.$container.style.display=t?"block":"none"}show(){this.display(1)}hide(){this.display(0)}remove(){this._data.$container.remove()}default(){this.value=this._data.default+"",this._data.$output&&(this._data.$output.innerText=this._data.default+"")}}class r extends e{constructor(t){super(t)}set value(t){return this._data.$output&&(this._data.$output.innerText=t+""),this._data.$control.value=t+""}get value(){return Number(this._data.$control.value)}}class n extends e{constructor(t){super(t)}get value(){return this._data.$control.checked}set value(t){return this._data.$control.checked=t}default(){this.value=this._data.default}}class a extends e{constructor(t){super(t)}get value(){return this._data.$control.innerHTML}set value(t){return this._data.$control.innerHTML=t+""}}class o extends e{constructor(t){super(t)}get value(){return this._data.$control.files[0]}set value(t){}}class i extends e{constructor(t){super(t)}set value(t){}get value(){return 1}}class s extends r{constructor(t){super(t)}set options(e){return this._data.$control.replaceChildren(...e.map((e,r)=>t.make("option",{text:e,value:r+""})))}}class c extends e{constructor(t){super(t)}set value(t){this._data.$control.innerText=t+""}get value(){return this._data.$control.innerText}}class l{constructor(t={}){return l.css=function(t){if(t){let e=document.createElement("style");e.innerText=t,document.head.appendChild(e)}return null}(l.css),this.init(t)}init(e){return e&&"object"==typeof e?(this.autoVar=e.autoVar??!0,t.make("div",{class:"ui_main theme-"+(e.theme??"light"),style:{zIndex:e.zIndex??3,left:e.x??0,top:e.y??0,width:e.width?"string"==typeof e.width?e.width:e.width+"px":"200px",position:e.parent?"":"absolute"},parent:e.parent??document.body,children:[e.title&&{class:"ui_title_bar",text:e.title},{class:"ui_content",var:"content"}],var:"root",context:this}),this):this}setTheme(t){return this.$root.classList="ui_main theme-"+t,this}destroy(){this.$root&&(this.$root.remove(),this.$root=void 0,this.#t=new Map)}setLabels(t){for(let e in t)this.#t.has(e)&&(this.#t.get(e).label=t[e])}toObject(){let t={};return this.#t.forEach((e,r)=>{!e.value||e instanceof i||(t[r]=e.value)}),t}toJson(){return JSON.stringify(this.toObject())}fromObject(t){if(Array.isArray(t))for(let e of t)this[e[0]](...e.slice(1));else for(let e in t)this.#t.has(e)&&(this.#t.get(e).value=t[e])}fromJson(t){this.fromObject(JSON.parse(t))}control(t){return this.#t.get(t)}get(t){return this.#t.has(t)?this.#t.get(t).value:void 0}set(t,e){return this.#t.has(t)&&(this.#t.get(t).value=e),e}remove(t){Array.isArray(t)||(t=[t]);for(let e of t)this.#t.has(e)&&(this.#t.get(e).remove(),this.#t.delete(e),Object.defineProperty(this,e,{get:void 0,set:void 0}))}onChange(t){this.#e=t}addSwitch(e,r,a,o){if(this.#t.has(e))return this;let i={default:a=a??!1};return t.make("div",{context:i,var:"container",class:"ui_container",parent:this.$content,children:[{tag:"label",class:"ui_checkbox_label",text:r,var:"label"},{tag:"label",class:"ui_checkbox",children:[{tag:"input",type:"checkbox",checked:a,var:"control",events:{click:t=>{let r=t.target.checked;this.#e(e,r),o&&o(r)}}},{tag:"span"}]}]}),e&&this.#t.set(e,new n(i)),this._addSetGet(e),this}addNumber(e,n,a,o,i){if(this.#t.has(e))return this;a=a??0;let s=this._makeContainer(n);return s.default=a,t.make("input",{parent:s.$container,context:s,type:"number",class:"ui_text_input ui_number",step:(o??1)+"",value:a+"",var:"control",events:{input:t=>{let r=Number(t.target.value);this.#e(e,r),i&&i(r)},mousewheel:()=>{}}}),e&&this.#t.set(e,new r(s)),this._addSetGet(e),this}addText(r,n,a,o){if(this.#t.has(r))return this;a=a??"";let i=this._makeContainer(n);return i.default=a,t.make("input",{parent:i.$container,context:i,type:"text",class:"ui_text_input",value:a+"",var:"control",events:{input:t=>{let e=t.target.value;this.#e(r,e),o&&o(e)}}}),r&&this.#t.set(r,new e(i)),this._addSetGet(r),this}addRange(e,n,a,o,i,s,c){if(this.#t.has(e))return this;a=a??0;let l=this._makeContainerOut(n,a);return l.default=a,t.make("input",{parent:l.$container,context:l,type:"range",class:"ui_range",value:a+"",min:(o??0)+"",max:(i??100)+"",step:(s??1)+"",var:"control",events:{input:t=>{let r=Number(t.target.value);this.#e(e,r),c&&c(r),l.$output.innerText=r},mousewheel:t=>{t.stopPropagation(),t.preventDefault();let e=t.target;e.value=Number(e.value)+Number(e.step)*(t.deltaY>0?-1:1),e.dispatchEvent(new Event("input"))}}}),e&&this.#t.set(e,new r(l)),this._addSetGet(e),this}addArea(r,n,a,o,i=5){if(this.#t.has(r))return this;a=a??"";let s=this._makeContainer(n);return s.default=a,t.make("textarea",{parent:s.$container,context:s,class:"ui_textarea",rows:i,value:a+"",var:"control",events:{input:t=>{let e=t.target.value;this.#e(r,e),o&&o(e)}}}),r&&this.#t.set(r,new e(s)),this._addSetGet(r),this}addHTML(e,r,n){if(this.#t.has(e))return this;n=n??"";let o=this._makeContainer(r);return o.default=n,t.make("div",{parent:o.$container,context:o,html:n+"",var:"control"}),e&&this.#t.set(e,new a(o)),this._addSetGet(e),this}addElement(t,e,r){if(this.#t.has(t))return this;let n=this._makeContainer(e);return n.default=r,n.$control=r,n.$container.append(r),t&&this.#t.set(t,new a(n)),this._addSetGet(t),this}addSelect(e,r,n,a){if(this.#t.has(e))return this;n=n??[];let o=this._makeContainer(r);return o.default=0,t.make("select",{parent:o.$container,context:o,class:"ui_select",var:"control",events:{change:t=>{let r=t.target.selectedIndex,n=t.target.options[r].text;this.#e(e,r,n),a&&a(r,n)}},children:n.map((e,r)=>t.make("option",{text:e,value:r+""}))}),e&&this.#t.set(e,new s(o)),this._addSetGet(e),this}addButton(e,r,n){if(this.#t.has(e))return this;let a={};return t.make("div",{context:a,var:"container",class:"ui_button_cont",parent:this.$content,children:[this._makeButton(a,e,r,n)]}),a.$label=a.$control,e&&this.#t.set(e,new i(a)),this}addButtons(e){let r=t.make("div",{var:"container",class:"ui_button_cont",parent:this.$content});for(let t in e){let n={$container:r},a=e[t];r.append(Array.isArray(a)?this._makeButton(n,t,a[0],a[1]):this._makeButton(n,t,a)),n.$label=n.$control,t&&this.#t.set(t,new i(n))}return this}addFile(e,r,n){if(this.#t.has(e))return this;let a=this._makeContainer(r),i=t=>{let r=1==t.length?t[0]:t;this.#e(e,r),n&&n(r),a.$filename.innerText=t[0].name};return a.$container.append(...t.makeArray([{tag:"input",context:a,class:"ui_file_chooser",type:"file",var:"control",attrs:{multiple:!0},also(t){t.addEventListener("change",()=>i(t.files))}},{tag:"label",context:a,class:"ui_file_chooser_label",text:"...",var:"filename",also(t){t.addEventListener("click",()=>a.$control.click()),t.addEventListener("drop",t=>i(t.dataTransfer.files))}}])),e&&this.#t.set(e,new o(a)),["dragenter","dragover","dragleave","drop"].forEach(t=>{this.$root.addEventListener(t,t=>{t.preventDefault(),t.stopPropagation()},!1)}),["dragenter","dragover"].forEach(t=>{this.$root.addEventListener(t,function(){a.$filename.classList.add("active")},!1)}),["dragleave","drop"].forEach(t=>{this.$root.addEventListener(t,function(){a.$filename.classList.remove("active")},!1)}),this._addSetGet(e),this}addColor(e,n,a,o){if(this.#t.has(e))return this;a=a??"#000";let i=this._makeContainerOut(n,a);return i.default=a,i.$container.append(t.make("input",{context:i,type:"color",class:"ui_color",value:a,var:"control",attrs:{"colorpick-eyedropper-active":!1},events:{input:t=>{let r=t.target.value;this.#e(e,r),o&&o(r),i.$output.innerText=r}}})),e&&this.#t.set(e,new r(i)),this._addSetGet(e),this}addLabel(t,e,r){if(this.#t.has(t))return this;r=r??"";let n=this._makeContainerOut(e,r);return n.$control=n.$output,t&&this.#t.set(t,new c(n)),this._addSetGet(t),this}addSpace(){return t.make("div",{class:"ui_space",parent:this.$content}),this}_addSetGet(t){this.autoVar&&t&&Object.defineProperty(this,t,{get:()=>this.get(t),set:e=>this.set(t,e),configurable:!0})}_checkID(t){return t||"_empty_"+this.#r++}_makeButton(e,r,n,a){return t.make("button",{context:e,class:"ui_button",var:"control",text:n+"",events:{click:t=>{this.#e(r),a&&a()}}})}_makeContainer(e){let r={};return t.make("div",{context:r,var:"container",class:"ui_container",parent:this.$content,children:[{class:"ui_label",children:[{tag:"b",var:"label",text:e}]}]}),r}_makeContainerOut(e,r){let n={};return t.make("div",{context:n,var:"container",class:"ui_container",parent:this.$content,children:[{class:"ui_label",children:[{tag:"b",text:e,var:"label"},{tag:"span",text:": "},{tag:"span",text:r+"",var:"output"}]}]}),n}#t=new Map;#r=0;#e=()=>{};static css=".ui_main.theme-light{--border:#aaa;--back:#fff;--mid:#ccc;--bright:#eaeaea;--font:#000;--font-mid:#555}.ui_main.theme-dark{--border:#484d53;--back:rgb(30, 35, 42);--mid:#22272E;--bright:#2D333B;--font:#ccc;--font-mid:#999}.ui_main{background-color:var(--mid);text-align:left;font:12px sans-serif;user-select:none;-webkit-user-select:none;border:none;border-radius:5px}.ui_main.noback{background:none}.ui_main.noback .ui_container{border:1px solid var(--border);margin:5px 0}.ui_main.noback .ui_title_bar{background:none;padding:0}.ui_main.noback .ui_button_cont{margin:5px 0}.ui_content{overflow-y:auto;border-radius:5px}.ui_title_bar{text-align:center;user-select:none;-webkit-user-select:none;padding:4px;font-weight:700;border:none;background:var(--bright);color:var(--font);font-size:14px;border-radius:5px 5px 0 0}.ui_container{margin:5px;padding:6px;border:none;position:relative;background:var(--bright);color:var(--font);border-radius:4px}.ui_space{height:5px}.ui_range{-webkit-appearance:none;-moz-appearance:none;width:100%;height:10px;padding:0;margin:0;margin-top:5px;background-color:#fff0;border:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.ui_range:focus{outline:none;border:none}.ui_range::-webkit-slider-runnable-track{width:100%;height:17px;cursor:pointer;background:var(--back);border-radius:4px;border:1px solid var(--border)}.ui_range:focus::-webkit-slider-runnable-track{background:var(--back)}.ui_range::-webkit-slider-thumb{-webkit-appearance:none;height:15px;width:15px;background:var(--border);cursor:pointer;margin-top:0;border-radius:0}.ui_range::-moz-range-track{width:100%;height:15px;cursor:pointer;background:var(--back);border-radius:4px;border:1px solid var(--border)}.ui_range::-moz-range-thumb{height:15px;width:15px;border:none;background:var(--border);cursor:pointer;border-radius:0}.ui_button_cont{margin:5px}.ui_button{cursor:pointer;background:var(--bright);color:var(--font-mid);height:26px;border:1px solid var(--border);font:12px sans-serif;margin-right:5px;border-radius:4px}.ui_button:active{background:var(--back)}.ui_checkbox{cursor:pointer;display:inline;width:16px;float:right}.ui_checkbox input{position:absolute;left:-99999px}.ui_checkbox span{height:16px;width:100%;display:block;text-indent:20px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAALklEQVQ4T2OcOXPmfwYKACPIgLS0NLKMmDVrFsOoAaNhMJoOGBioFwZkZUWoJgApdFaxjUM1YwAAAABJRU5ErkJggg==) no-repeat}.ui_checkbox input:checked+span{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAvElEQVQ4T63Tyw2EIBAA0OFKBxBL40wDRovAUACcKc1IB1zZDAkG18GYZTmSmafzgTnnMgwchoDWGlJKheGcP3JtnPceCqCUAmttSZznuYtgchsXQrgC+77DNE0kUpPbmBOoJaBOIVQylnqWgAAeKhDve/AN+EaklJBzhhgjWRoJVGTbNjiOowAIret6a+4jYIwpX8aDwLIs74C2D0IIYIyVP6Gm898m9kbVm85ljHUTf16k4VUefkwDrxk+zoUEwCt0GbUAAAAASUVORK5CYII=) no-repeat}.ui_checkbox_label{height:16px;display:inline-block;position:relative;top:2px;font-weight:700}.ui_label{margin-bottom:3px;user-select:none;-webkit-user-select:none;cursor:default}.ui_text_input{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;width:100%;padding:0 0 0 5px;height:24px;font-size:12px;border:1px inset var(--border);background:var(--back);color:var(--font-mid);outline:none;border-radius:4px}.ui_select{background:var(--back);-webkit-appearance:none;-moz-appearance:none;appearance:none;color:var(--font-mid);width:100%;height:24px;border:1px solid var(--border);-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;padding:0 5px;-moz-outline:none;font-size:14px;cursor:pointer;border-radius:4px}.ui_select option{font-size:14px}.ui_select:focus{outline:none}.ui_number{height:24px}.ui_textarea{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;resize:vertical;width:100%;padding:3px 5px;font-size:12px;border:1px inset var(--border);background:var(--back);color:var(--font-mid);outline:none;border-radius:4px}.ui_textarea::-webkit-scrollbar{width:7px;height:7px}.ui_textarea::-webkit-scrollbar-track{background:none}.ui_textarea::-webkit-scrollbar-thumb{background:var(--border);border-radius:4px}.ui_color{padding:0;margin:0;outline:none;cursor:pointer;background:none;border:none;height:30px;width:100%}.ui_file_chooser{position:absolute;left:-999999px}.ui_file_chooser_label{background:var(--back);color:var(--font);height:30px;border:1px solid var(--border);font:12px sans-serif;width:100%;display:block;cursor:pointer;padding:7px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;border-radius:4px}.ui_file_chooser_label.active{border:2px solid var(--font)}"}export{l as default};