var t={};t.d=(e,i)=>{for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);const e=new Map;function i(t,e=!1,i=100){return new Promise(s=>{let n,a;const r=()=>{if(t.isConnected&&(t._mounted||(t._mounted=!0,t._onMount&&t._onMount()),n||(n=!0,e||s(t)),t.clientWidth||t.clientHeight))return t._rendered||(t._rendered=!0,t._onRender&&t._onRender()),void(a||(a=!0,e&&s(t)));i--?requestAnimationFrame(r):(e&&!a||!e&&!n)&&s(null)};r()})}class s{constructor(t,e={},i=!1){this.$root=s.make(t,{...e,ctx:this},i)}static make(t,e={},i=!1){t??=e.tag;let r="svg"==t||i?document.createElementNS("http://www.w3.org/2000/svg",t??"svg"):document.createElement(t??"div");s.update(r,e);for(let t of n)r[t]=(...e)=>s[t](r,...e);return a.forEach(t=>{t in e&&(r["_"+t]=e[t].bind(r.ctx,{el:r,ctx:r.ctx}))}),r._onResize&&function(t,e){const i=new ResizeObserver(i=>{for(const s of i)s.target===t&&e(s)});i.observe(t);const s=new MutationObserver(()=>{t.isConnected||(i.disconnect(),s.disconnect())});s.observe(document.body,{childList:!0,subtree:!0})}(r,r._onResize),r}static update(t,e){if(!p.node(t)||!p.obj(e))return t;t.ctx=e.ctx??e.context??t.ctx;for(let[i,s]of Object.entries(e))_(t,i,s);return t._onUpdate&&t._onUpdate(),e.also&&e.also.call(t.ctx,{el:t,ctx:t.ctx}),t}static mount(t,e,s=!1,n=100){if(t)if(null==e)t.parentNode&&t.parentNode.removeChild(t);else if(t.parentNode!==e&&e.appendChild(t),n)return i(t,s,n);return Promise.resolve(t)}static clear(t,e=!0){if(t)for(;t.firstChild;)e&&s.clear(t.firstChild,!0),s.remove(t.firstChild,!1)}static remove(t,e=!0){t&&(e&&s.clear(t,!0),s.release(t),s.unbind(t),t._onDestroy&&t._onDestroy(),a.forEach(e=>t["_"+e]=null),t.parentNode&&t.parentNode.removeChild(t))}static replace(t,e,s=!1){return t&&(t.parentNode&&t.parentNode.replaceChild(e,t),s&&(e.ctx=t.ctx),i(e),t.remove()),e}static release(t){t&&t._events&&(t._events.forEach(({ev:e,fn:i,options:s})=>t.removeEventListener(e,i,s)),t._events=[])}static unbind(t){t&&t._unsub&&(Object.values(t._unsub).forEach(t=>t()),t._unsub={})}static makeShadow(t,e={},i=""){return t&&p.obj(e)?(p.node(t)||(t=document.createElement(t)),t.attachShadow({mode:"open"}),s.update(t.shadowRoot,{ctx:e.context??e.ctx,child:[{tag:"style",$:"style",text:i},e.child,e.children]}),delete e.child,delete e.children,s.update(t,e)):null}static setTemplate(t,e,i){s.templates.set(t,(...t)=>s.make(e,i(...t)))}static useTemplate(t,...e){const i=s.templates.get(t);return i?i(...e):null}static templates=new Map;static config=s.update}const n=["update","mount","clear","remove"],a=["onMount","onRender","onUpdate","onResize","onDestroy"],r=new Set(["tag","get","also","context","ctx",...a]),o={children:"child",children_r:"child_r",text:"textContent",html:"innerHTML"},l={push(t,e){e.push(t)},$(t,e){t.ctx&&(t.ctx["$"+e]=t)},attrs(t,e){d("attrs",t,e,(e,i)=>t.setAttribute(e,i),e=>t.removeAttribute(e))},data(t,e){d("data",t,e,(e,i)=>t.dataset[e]=i,e=>delete t.dataset[e])},props(t,e){for(let i in e){let s=h(t,i,null,e[i]);t[i]=["min","max","step","selectedIndex"].includes(i)||"value"==i&&["number","range"].includes(t.type)?null==s||""===s||Number.isNaN(s)?"":+s:s??""}},transition(t,e){const{duration:i=300,easing:s="ease",delay:n=0,onEnd:a=null,...r}=e;t.style.transition=Object.keys(r).map(t=>`${t} ${i}ms ${s} ${n}ms`).join(", "),a&&l.events(t,{transitionend:{handler:a,once:!0}}),requestAnimationFrame(()=>l.style(t,r))},events(t,e){for(let i in e){let s=e[i],n={};if(p.obj(s)&&(n=s,s=s.handler,!s))continue;const a=e=>s.call(t.ctx,Object.assign(e,{el:t,ctx:t.ctx}));t.addEventListener(i,a,n),(t._events??=[]).push({ev:i,fn:a,options:n})}},events_r(t,e){s.release(t),l.events(t,e)},child(t,e){u(t,e)},child_r(t,e){s.clear(t),u(t,e)},style(t,e){c("style",t,e,e=>t.style.cssText+=e+";",(e,i)=>{e.startsWith("--")?t.style.setProperty(e,i):t.style[e]=i})},style_r(t,e){t.style.cssText="",l.style(t,e)},class(t,e){p.arr(e)&&(e=Object.fromEntries(e.filter(Boolean).map(t=>[t,!0]))),c("class",t,e,e=>e.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(e,i)=>i?t.classList.add(e):t.classList.remove(e))},class_r(t,e){t.className="",l.class(t,e)},parent(t,e){s.mount(t,e,!1,t._onMount||t._onRender?100:0)}};function d(t,e,i,s,n){for(let a in i){let r=h(e,t,a,i[a]);null==r?n(a):s(a,String(r))}}function c(t,e,i,s,n){if(p.str(i))s(i);else for(let s in i)"_raw"==s?l[t](e,i[s]):n(s,h(e,t,s,i[s]))}function u(t,e){e&&(p.str(e)?t.insertAdjacentHTML("beforeend",e):p.arr(e)?e.forEach(e=>u(t,e)):p.node(e)?s.mount(e,t):e instanceof s?s.mount(e.$root,t):p.obj(e)&&s.make(null,{ctx:t.ctx,...e,parent:t},t instanceof SVGElement))}function h(t,e,i,s){if(p.func(s))return s.call(t.ctx,{el:t,ctx:t.ctx});if(p.arr(s)&&p.state(s[0]))return s.map(s=>h(t,e,i,s))[0];if(p.state(s)){const n=(n,a)=>{a=s.map({el:t,ctx:t.ctx,name:n,value:a}),_(t,e,i?{[i]:a}:a),t._onUpdate&&t._onUpdate()},a=e+"."+i+"."+s.name;return t._unsub||(t._unsub={}),a in t._unsub&&t._unsub[a](),t._unsub[a]=s._state.subscribe(s.name,n),s.map({el:t,ctx:t.ctx,name:s.name,value:s._state[s.name]})}return s}function _(t,e,i){if(r.has(e))return;(e=o[e]??e).startsWith("on")?(i={[e.slice(2).toLowerCase()]:i},e="events"):i=h(t,e,null,i);const s=l[e];null!=i&&s?s(t,i):l.props(t,{[e]:i})}const p={func:t=>"function"==typeof t,str:t=>"string"==typeof t,arr:t=>Array.isArray(t),node:t=>t instanceof Node,obj:t=>null!==t&&"object"==typeof t,state:t=>t&&t._state};class g{static svg=(t={},e={})=>({tag:"svg",...e,attrs:t});static rect=(t,e,i,s,n,a,r={},o={})=>({tag:"rect",...o,attrs:{...r,x:t,y:e,width:i,height:s,rx:n,ry:a}});static circle=(t,e,i,s={},n={})=>({tag:"circle",...n,attrs:{...s,cx:t,cy:e,r:i}});static line=(t,e,i,s,n={},a={})=>({tag:"line",...a,attrs:{...n,x1:t,y1:e,x2:i,y2:s}});static polyline=(t,e={},i={})=>({tag:"polyline",...i,attrs:{...e,points:t}});static polygon=(t,e={},i={})=>({tag:"polygon",...i,attrs:{...e,points:t}});static path=(t,e={},i={})=>({tag:"path",...i,attrs:{...e,d:t}});static text=(t,e,i,s={},n={})=>({tag:"text",...n,text:t,attrs:{...s,x:e,y:i}});static make=(t,e)=>s.make(t,e,!0);static update=s.update;static config=s.update}Object.getOwnPropertyNames(g).forEach(t=>g["make_"+t]=(...e)=>g.make(null,g[t](...e)));class b{constructor(t={}){this._data={},this._subs=new Map,this.addStates(t)}addStates(t){for(const e in t)e in this||e in this._data||(this._data[e]=t[e],Object.defineProperty(this,e,{get:()=>this._data[e],set:t=>{if(Object.is(this._data[e],t))return;this._data[e]=t;const i=this._subs.get(e);i&&i.forEach(i=>i(e,t))}}))}hasState(t){return t in this._data}bind(t,e=t=>t.value){return{_state:this,name:t,map:e}}subscribe(t,e){return this._subs.has(t)||this._subs.set(t,new Set),this._subs.get(t).add(e),()=>this._subs.get(t).delete(e)}}class m{constructor(t,e){this._default=t,this._state=new b({value:t,label:e,hidden:!1})}get label(){return this._state.label}set label(t){return this._state.label=t}get value(){return this._state.value}set value(t){return this._state.value=t}get input(){return this.$input}display(t){this._state.hidden=!t}show(){this.display(!0)}hide(){this.display(!1)}remove(){this.$container.remove()}default(){this._state.value=this._default}}class f extends m{constructor(t,e){super(t,e)}set options(t){this._state.options=$(t)}get options(){return this._state.options.map(t=>t.text)}reset(){this.value=0}get text(){return this.options[this.value]}}class x extends m{constructor(t,e){super(t,e)}set valueInt(t){return this.value="#"+t.toString(16).padStart(6,0)}get valueInt(){return parseInt(this.value.slice(1),16)}}class v extends m{constructor(t,e){super(t,e),this._state.addStates({filename:"...",active:!1})}}class w{constructor(t={}){!function(t,i=""){if(i||(i=function(t){let e=5381;for(let i=0;i<t.length;i++)e=(e<<5)+e+t.charCodeAt(i),e|=0;return e.toString(36)}(t)),e.has(i))return;const s=document.createElement("style");s.textContent=t,document.head.appendChild(s),e.set(i,s)}(w.css);const i=t=>null==t?0:"string"==typeof t?t:t+"px";let n={};null==(t={width:"200px",parent:document.body,title:"",zIndex:3,theme:"light",autoVar:!0,class:"",...t}).x&&null==t.y||(n.left=i(t.x),n.top=i(t.y),n.position="absolute"),this._autoVar=t.autoVar,this._class=t.class,this._dragCount=0,this._lastDragState=0;const a=(t,e)=>{t.preventDefault(),t.stopPropagation(),this._dragCount=null===e?0:Math.max(0,this._dragCount+e);const i=0!=this._dragCount;this._lastDragState!=i&&(this._lastDragState=i,this._widgets.forEach(t=>{t instanceof v&&(t._state.active=0!=this._dragCount)}))};return s.make("div",{ctx:this,$:"ui",parent:t.parent,style:{zIndex:t.zIndex,width:t.width+("string"==typeof t.width?"":"px"),...n},child:[{$:"title",text:t.title,class:"ui_title_bar"},{$:"widgets",class:"ui_content"}],events:{dragenter:t=>a(t,1),dragover:t=>a(t,0),dragleave:t=>a(t,-1),drop:t=>a(t,null)}}),this.setTheme(t.theme)}setTheme(t){return this.$ui.className=`ui_main theme-${t} ${this._class}`,this}useWheel(t){this._wheel=t}destroy(){this.removeAll(),this.$ui&&(this.$ui.remove(),this.$ui=null,this._widgets=new Map)}setLabels(t){for(let e in t)this._widgets.has(e)&&(this.widget(e).label=t[e])}toObject(){let t={};return this._widgets.forEach((e,i)=>t[i]=e.value),t}toJson(){return JSON.stringify(this.toObject())}fromObject(t){for(let e in t)this._widgets.has(e)&&(this.widget(e).value=t[e])}fromJson(t){this.fromObject(JSON.parse(t))}widget(t){return this._widgets.get(t)}getWidget=t=>this.widget(t);control=t=>this.widget(t);get(t){return this._widgets.has(t)?this.widget(t).value:null}set(t,e){return this._widgets.has(t)&&(this.widget(t).value=e),e}remove(t){"string"==typeof t&&(t=[t]);for(let e of t)this._widgets.has(e)&&(this.widget(e).remove(),this._widgets.delete(e),delete this[e],delete this[e+"Text"])}removeAll(){this.remove(Array.from(this._widgets.keys())),s.clear(this.$widgets)}onChange(t){this._cb=t}addSwitch(t,e,i,n){if(t=this._checkID(t),this._widgets.has(t))return this;const a=new m(Boolean(i),e);return s.make("div",this._getWidget(a,{tag:"label",class:"ui_checkbox_cont",child:[{tag:"label",text:a._state.bind("label")},{tag:"div",class:"ui_checkbox",child:{tag:"label",child:[{tag:"input",type:"checkbox",$:"input",checked:a._state.bind("value"),onChange:this._handleValue(a,t,t=>t.checked,n)},{tag:"span"}]}}]})),this._widgets.set(t,a),this._addSetGet(t),this}addNumber(t,e,i,n,a){if(t=this._checkID(t),this._widgets.has(t))return this;const r=new m(y(i),e);return s.make("div",this._getContainer(r,{tag:"input",type:"number",$:"input",class:"ui_input_base ui_input",step:n??1,value:r._state.bind("value"),onInput:this._handleValue(r,t,t=>y(t.value),a),onMousewheel:t=>{this._wheel||(t.preventDefault(),window.scrollBy({top:t.deltaY,behavior:"smooth"}))}})),this._widgets.set(t,r),this._addSetGet(t),this}addText(t,e,i,n){if(t=this._checkID(t),this._widgets.has(t))return this;const a=new m(k(i),e);return s.make("div",this._getContainer(a,{tag:"input",type:"text",$:"input",class:"ui_input_base ui_input",value:a._state.bind("value"),onInput:this._handleValue(a,t,t=>k(t.value),n)})),this._widgets.set(t,a),this._addSetGet(t),this}addInput=(...t)=>this.addText(...t);addSlider(t,e,i,n,a,r,o){if(t=this._checkID(t),this._widgets.has(t))return this;const l=new m(y(i),e);return s.make("div",this._getContainer(l,{class:"ui_range_cont",child:{tag:"input",type:"range",$:"input",class:"ui_range",min:n,max:a??100,step:r??1,value:l._state.bind("value"),onInput:this._handleValue(l,t,t=>y(t.value),o),onMousewheel:t=>{this._wheel&&(t.stopPropagation(),t.preventDefault(),t.el.value=t.el.valueAsNumber+Number(t.el.step)*(t.deltaY>0?-1:1),t.el.dispatchEvent(new Event("input")))}}},!0)),this._widgets.set(t,l),this._addSetGet(t),this}addRange=(...t)=>this.addSlider(...t);addArea(t,e,i,n,a=5){if(t=this._checkID(t),this._widgets.has(t))return this;const r=new m(k(i),e);return s.make("div",this._getContainer(r,{tag:"textarea",$:"input",class:"ui_input_base ui_textarea",rows:a,value:r._state.bind("value"),onInput:this._handleValue(r,t,t=>k(t.value),n)})),this._widgets.set(t,r),this._addSetGet(t),this}addHTML(t,e,i){if(t=this._checkID(t),this._widgets.has(t))return this;const n=new m(k(i),e);return s.make("div",this._getContainer(n,{$:"input",html:n._state.bind("value")})),this._widgets.set(t,n),this._addSetGet(t),this}addElement(t,e,i){if(t=this._checkID(t),this._widgets.has(t))return this;const n=new m(i,e);return s.make("div",this._getContainer(n,{$:"input",child_r:n._state.bind("value")})),this._widgets.set(t,n),this._addSetGet(t),this}addSelect(t,e,i,n){if(t=this._checkID(t),this._widgets.has(t))return this;const a=new f(0,e);return a._state.addStates({options:$(i)}),s.make("div",this._getContainer(a,{tag:"select",$:"input",class:"ui_input_base ui_select",value:a._state.bind("value"),child_r:a._state.bind("options"),onChange:e=>{let i=e.el.selectedIndex,s=e.el.options[i].text;a._state.value=i,this._cb(t,i,s),n&&n(i,s)},onMousewheel:t=>{if(!this._wheel)return;t.stopPropagation(),t.preventDefault();let e=t.el.selectedIndex;if(t.deltaY<0&&e>0)e--;else{if(!(t.deltaY>0&&e<t.el.options.length-1))return;e++}t.el.value=e,t.el.dispatchEvent(new Event("change"))}})),this._widgets.set(t,a),this._addSetGet(t)&&Object.defineProperty(this,t+"Text",{get:()=>this.widget(t).text,configurable:!0}),this}addButton(t,e,i){if(t=this._checkID(t),this._widgets.has(t))return this;const n=new m(0,e);return s.make("div",this._getWidget(n,this._getButton(n,t,i),"ui_button_cont")),this._widgets.set(t,n),this}addButtons(t){let e=s.make("div",{class:"ui_button_cont",parent:this.$widgets});return s.update(e,{child:Object.entries(t).map(([t,i])=>{if(t=this._checkID(t),this._widgets.has(t))return;Array.isArray(i)||(i=[i,null]);let[s,n]=i;const a=new m(0,s);return a.$container=e,this._widgets.set(t,a),this._getButton(a,t,n)})}),this}addFile(t,e,i){if(t=this._checkID(t),this._widgets.has(t))return this;const n=(e,i,s)=>{let n=Array.from(i).map(t=>t.name).join(", ");if(e._state.filename=n||"...",!i.length)return;let a=1==i.length?i[0]:i;e._state.value=a,this._cb(t,a),s&&s(a)},a=new v(null,e);let r=s.make("div",this._getContainer(a,[{tag:"input",type:"file",$:"input",class:"ui_file_chooser",onChange:()=>n(a,a.$input.files,i),attrs:{multiple:!0}},{tag:"label",class:{_raw:"ui_input_base ui_file_chooser_label",active:a._state.bind("active")},text:a._state.bind("filename")}]));return s.update(r,{onClick:()=>a.$input.click(),onDrop:t=>n(a,t.dataTransfer.files,i)}),this._widgets.set(t,a),this._addSetGet(t),this}addColor(t,e,i,n){if(t=this._checkID(t),this._widgets.has(t))return this;const a=new x(i??"#000",e);let r=s.make("div",this._getContainer(a,null,!0));return s.update(r,{class:"ui_color_cont",child:{tag:"input",type:"color",$:"input",class:"ui_color",value:a._state.bind("value"),attrs:{"colorpick-eyedropper-active":!1},onInput:this._handleValue(a,t,t=>t.value,n)}}),this._widgets.set(t,a),this._addSetGet(t),this}addLabel(t,e,i){if(t=this._checkID(t),this._widgets.has(t))return this;const n=new m(k(i),e);return s.make("div",this._getContainer(n,null,!0)),this._widgets.set(t,n),this._addSetGet(t),this}addSpace(t=5){return s.make("div",{style:`height: ${t}px`,parent:this.$widgets}),this}_addSetGet(t){return!(!this._autoVar||!t||"function"==typeof this[t]||(Object.defineProperty(this,t,{get:()=>this.get(t),set:e=>this.set(t,e),configurable:!0}),0))}_checkID(t){return t||"_empty_"+this._count++}_getWidget=(t,e,i="ui_widget")=>({ctx:t,$:"container",class:{_raw:i,hidden:t._state.bind("hidden")},parent:this.$widgets,child:e});_getContainer(t,e,i){return this._getWidget(t,[{class:"ui_label",child:[{tag:"b",text:t._state.bind("label")},i&&{tag:"span",text:": "},i&&{tag:"span",text:t._state.bind("value")}]},e])}_getButton=(t,e,i)=>({tag:"button",class:"ui_button",text:t._state.bind("label"),onClick:()=>{this._cb(e),i&&i()}});_handleValue(t,e,i,s){return n=>{const a=i(n.el);t._state.value=a,this._cb(e,a),s&&s(a)}}_wheel=!1;_widgets=new Map;_count=0;_cb=()=>{};static css='.ui_main.theme-light{--border:#aaa;--back:#fff;--mid:#ccc;--tab:#f0f0f0;--font:#000;--font-mid:#555;--thumb:var(--back)}.ui_main.theme-dark{--border:#484d53;--back:rgb(30, 35, 42);--mid:#22272E;--tab:#2D333B;--font:#ccc;--font-mid:#999;--thumb:var(--font-mid)}.ui_main{background-color:var(--mid);text-align:left;font:12px sans-serif;user-select:none;border:none;border-radius:6px}.ui_main.noback{background:none}.ui_main.noback .ui_widget{border:1px solid var(--mid);margin:5px 0}.ui_main.noback .ui_title_bar{display:none}.ui_main.noback .ui_button_cont{margin:5px 0}.ui_main.noback .ui_button{border:1px solid var(--mid)}.ui_content{overflow-y:auto;border-radius:6px}.ui_title_bar{text-align:center;font-weight:700;border:none;background:var(--tab);color:var(--font);font-size:15px;border-radius:5px 5px 0 0}.ui_title_bar:not(:empty){padding:4px}.ui_widget{margin:5px;padding:5px;border:none;position:relative;background:var(--tab);color:var(--font);border-radius:5px}.ui_widget.hidden{display:none}.ui_range_cont{display:flex;align-items:center;padding:10px 0 6px 0}.ui_range{appearance:none;box-sizing:border-box;margin:0;padding:0;width:100%;height:2px;background:var(--border);cursor:pointer;touch-action:none}.ui_range::-webkit-slider-thumb{appearance:none;background:var(--thumb);width:16px;height:16px;border-radius:50%;box-shadow:0 0 4px #0000005a}.ui_range::-moz-range-thumb{border:none;background:var(--thumb);width:16px;height:16px;border-radius:50%}.ui_button_cont{margin:5px;gap:5px;display:flex}.ui_button{cursor:pointer;background:var(--tab);color:var(--font-mid);height:26px;border-radius:4px;width:100%;border:none}.ui_button:hover{filter:brightness(.96)}.ui_button:active{background:var(--back)}.ui_checkbox_cont{cursor:pointer;display:flex;align-items:center;justify-content:space-between}.ui_checkbox_cont label{font-weight:700;pointer-events:none}.ui_checkbox{display:inline-block}.ui_checkbox label{display:flex;align-items:center;cursor:pointer;user-select:none}.ui_checkbox input{display:none}.ui_checkbox span{width:18px;height:18px;border:1px solid var(--border);border-radius:4px;background-color:var(--back);position:relative}.ui_checkbox input:checked+span::after{content:"âœ“";position:absolute;left:3px;top:-2px;font-size:16px;color:var(--font);font-weight:700}.ui_label{user-select:none;-webkit-user-select:none;cursor:default}.ui_input_base{width:100%;box-sizing:border-box;background:var(--back);outline:none;color:var(--font-mid);border:1px solid var(--border);transition:border-color 0.1s;border-radius:4px;margin-top:4px}.ui_input_base:focus{border-color:var(--font-mid)}.ui_input{height:24px;padding:5px;line-height:24px}.ui_select{height:24px;padding:0 2px;cursor:pointer}.ui_textarea{resize:vertical;padding:3px 5px}.ui_textarea::-webkit-scrollbar{width:7px;height:7px}.ui_textarea::-webkit-scrollbar-track{background:none}.ui_textarea::-webkit-scrollbar-thumb{background:var(--border);border-radius:4px}.ui_file_chooser_label{padding:5px;height:24px;display:block;cursor:pointer;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.ui_file_chooser_label.active{border-color:var(--font-mid)}.ui_file_chooser{display:none}.ui_color_cont{display:flex;align-items:center;justify-content:space-between}.ui_color_cont .ui_label{margin:0}.ui_color{cursor:pointer;padding:0;margin:0;border:none;background:none;height:22px;width:22px}'}const k=t=>String(t??""),y=t=>Number.isFinite(+t)?+t:0,$=t=>t.map((t,e)=>({tag:"option",text:t,value:e}));export{w as default};